cp input.sh input.sh.orig

stdin input.sh
shfmt
cmp stdout input.sh.golden
! stderr .

stdin input.sh
shfmt -
cmp stdout input.sh.golden
! stderr .

shfmt input.sh
cmp stdout input.sh.golden
! stderr .

shfmt -l input.sh
stdout 'input\.sh'
! stdout foo
! stderr .
cmp input.sh input.sh.orig

shfmt -l input.sh input.sh
stdout -count=2 'input.sh'

shfmt -l -w input.sh
stdout 'input\.sh'
! stdout foo
! stderr .
cmp input.sh input.sh.golden

cp input.sh.orig input.sh
shfmt --list --write input.sh
stdout 'input\.sh'
! stdout foo
! stderr .
cmp input.sh input.sh.golden

-- input.sh --
 foo
-- input.sh.golden --
foo
